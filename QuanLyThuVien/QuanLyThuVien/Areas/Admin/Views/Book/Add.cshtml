@model DataProvider.Model.Book

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout_admin2.cshtml";
}
@section scripts{
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="js/captcha/jquery.clientsidecaptcha.js" type="text/javascript"></script>
    <script>

        $('#btnSelectImage').on('click', function (e) {
            e.preventDefault();
            var finder = new CKFinder();
            finder.selectActionFunction = function (url) {
                $('#txtImage').val(url);
            };
            finder.popup();
        })
    </script>

<script>
    $("#btnReloadAuthor").on('click', function (e) {
        var url = '@Url.Action("GetAuthor", "Book")'; // Don't hard code your url's!
        var authornames = $('#ddlAuthor'); // cache it
        e.preventDefault(); e.preventDefault();
        $.getJSON(url, function (response) {
            authornames.empty(); // remove any existing options
            $.each(response, function (index, item) { // item is now an object containing properties ID and Text
                authornames.append($('<option></option>').text(item.AuthorName).val(item.AuthorID));
            });
        });
    });
</script>

<script>

    $("#btnReloadCategory").on('click', function (e) {
        var url = '@Url.Action("GetCategory", "Book")'; // Don't hard code your url's!
        var categorynames = $('#ddlCategory'); // cache it
        e.preventDefault(); e.preventDefault();
        $.getJSON(url, function (response) {
            categorynames.empty(); // remove any existing options
            $.each(response, function (index, item) { // item is now an object containing properties ID and Text
                categorynames.append($('<option></option>').text(item.CategoryName).val(item.CategoryID));
            });
        });
    });
</script>

}


<div class="col-md-6">
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">@ViewBag.Title</h3>
        </div>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
        <form role="form">
            <div class="box-body">
                <div class="form-group">
                    <label for="bookname">Tên sách</label>
                    @Html.TextBoxFor(model => model.BookName, new { @class = "form-control", placeholder = "Nhập tên sách" })
                </div>
                <div class="form-group">
                    <label>Mô tả</label>
                    @Html.TextAreaFor(model=>model.Description, new { @class = "form-control", placeholder = "Nhập...", rows = "3" })
                </div>
                <div class="form-group">
                    <label for="alias">Alias</label>
                    @Html.TextBoxFor(model => model.Alias, new { @class = "form-control", placeholder = "Ví dụ: tony-buoi-sang" })
                </div>
                <div class="form-group">
                    <label>Tác giả</label>
                    @Html.DropDownListFor(model => model.AuthorID, ViewBag.AuthorList as SelectList, "",new { @class = "form-control",@id="ddlAuthor" })
                    <a href='@Url.Action("Index","Author")' id="btnNewAuthor" class="btn btn-default" target="_blank"  style="margin-top: 10px">Thêm mới tác giả</a>
                    <button type="button" class="btn btn-default" id="btnReloadAuthor" style="margin-top: 10px">Reload</button>
                </div>
                <div class="form-group">
                    <label>Thể loại</label>
                    @Html.DropDownListFor(model => model.CategoryID, ViewBag.ListCategory as SelectList, "",new { @class = "form-control" ,@id="ddlCategory"})
                    <a href='@Url.Action("Index","BookCategory")' id="btnNewCategory" class="btn btn-default" style="margin-top: 10px">Thêm mới thể loại</a>\
                    <button type="button" class="btn btn-default" id="btnReloadCategory" style="margin-top: 10px">Reload</button>
                </div>
                <div class="form-group">
                    <label for="image">Image</label>
                    @Html.TextBoxFor(model => model.MoreImages, new { @class = "form-control", @id = "txtImage" })
                    <button type="button" id="btnSelectImage" class="btn btn-default" style="margin-top: 10px">Chọn file</button>
                </div>
                <div class="checkbox">
                    <label>
                        @Html.EditorFor(model=>model.TopHot) Top Hot
                    </label>
                </div>
            </div>
            <!-- /.box-body -->

            <div class="box-footer">
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-default" onclick="location.href='@Url.Action("Index","Book")'">Trở về</button>
            </div>
        </form>
}
    </div>
</div>

@Html.Partial("partial_Ebook")


